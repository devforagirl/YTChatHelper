<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    :root {
      /* White & Pink Theme */
      --bg-color: #ffffff;
      --card-bg: #f9f9f9;
      --text-main: #333333;
      --text-sub: #666666;
      --accent: #e91e63; /* Pink */
      --accent-hover: #c2185b;
      --border-color: #eeeeee;
    }

    body {
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      width: 320px;
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-main);
      user-select: none;
    }

    .container {
      padding: 12px;
    }

    /* 标题栏 & 主开关 */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--accent);
    }

    header h2 {
      margin: 0;
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
      flex-grow: 1;
    }

    .rate-link {
      text-decoration: none;
      color: #ff9800;
      font-weight: bold;
      font-size: 14px;
      margin: 0 10px;
      padding: 2px 6px;
      border: 1px solid #ff9800;
      border-radius: 4px;
      transition: all 0.2s;
    }
    .rate-link:hover {
      background: #ff9800;
      color: white;
    }

    /* 主开关样式 */
    .power-switch {
      position: relative;
      display: inline-block;
      width: 42px;
      height: 22px;
    }
    .power-switch input { opacity: 0; width: 0; height: 0; }
    .power-slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .3s;
      border-radius: 22px;
    }
    .power-slider:before {
      position: absolute;
      content: "";
      height: 16px; width: 16px;
      left: 3px; bottom: 3px;
      background-color: white;
      transition: .3s;
      border-radius: 50%;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    input:checked + .power-slider { background-color: var(--accent); }
    input:checked + .power-slider:before { transform: translateX(20px); }

    .setting-group {
      margin-bottom: 10px;
      transition: opacity 0.3s;
    }

    body.disabled .setting-group, 
    body.disabled .toggle-group {
      opacity: 0.4;
      pointer-events: none;
    }

    .label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    label {
      font-size: 12px;
      color: var(--text-sub);
      font-weight: 500;
    }

    .value-display {
      font-size: 11px;
      color: var(--accent);
      font-family: monospace;
      font-weight: bold;
    }

    /* Range Slider */
    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      background: transparent;
      margin: 0;
    }
    input[type=range]:focus { outline: none; }
    input[type=range]::-webkit-slider-runnable-track {
      width: 100%;
      height: 3px;
      cursor: pointer;
      background: #e0e0e0;
      border-radius: 2px;
    }
    input[type=range]::-webkit-slider-thumb {
      height: 14px; width: 14px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      -webkit-appearance: none;
      margin-top: -5.5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    /* Select */
    select {
      width: 100%;
      padding: 4px 8px;
      background-color: var(--card-bg);
      color: var(--text-main);
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 12px;
      outline: none;
      cursor: pointer;
    }
    select:focus { border-color: var(--accent); }

    /* Toggle Group */
    .toggle-group {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 8px;
      margin-top: 8px;
      border-top: 1px dashed #ddd;
    }
    
    .mini-switch {
      position: relative;
      display: inline-block;
      width: 32px; height: 16px;
    }
    .mini-switch input { opacity: 0; width: 0; height: 0; }
    .mini-slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .3s;
      border-radius: 16px;
    }
    .mini-slider:before {
      position: absolute;
      content: "";
      height: 12px; width: 12px;
      left: 2px; bottom: 2px;
      background-color: white;
      transition: .3s;
      border-radius: 50%;
    }
    input:checked + .mini-slider { background-color: var(--accent); }
    input:checked + .mini-slider:before { transform: translateX(16px); }

    /* Footer & Rate Me */
    footer {
      text-align: center;
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }

    .rate-btn {
      display: inline-block;
      text-decoration: none;
      color: #ff9800; /* Orange/Gold */
      font-weight: bold;
      font-size: 13px;
      margin-bottom: 5px;
      transition: transform 0.2s;
      cursor: pointer;
    }
    .rate-btn:hover {
      transform: scale(1.05);
      color: #f57c00;
    }

    .version-info {
      font-size: 10px;
      color: #999;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <!-- Title placeholder for dynamic version -->
      <h2 id="appTitle">Livechat Danmaku Helper</h2>
      <a href="https://chromewebstore.google.com/detail/youtube-livechat-danmaku/dgflmodfjpkkfigdcghlogiecbahjcld/reviews" target="_blank" class="rate-link" id="rateBtn">5★</a>
      <label class="power-switch">
        <input type="checkbox" id="enabled">
        <span class="power-slider"></span>
      </label>
    </header>

    <div class="setting-group">
      <div class="label-row">
        <label for="position" data-i18n="displayArea">Display Area</label>
      </div>
      <select id="position">
        <option value="all" data-i18n="fullScreen">Full Screen</option>
        <option value="top" data-i18n="topHalf">Top Half (50%)</option>
        <option value="bottom" data-i18n="bottomHalf">Bottom Half (50%)</option>
      </select>
    </div>

    <div class="setting-group">
      <div class="label-row">
        <label for="fontFamily" data-i18n="fonts">Fonts</label>
      </div>
      <select id="fontFamily">
        <optgroup label="Common">
          <option value="Arial, sans-serif">Arial (Default)</option>
          <option value="'Segoe UI', Roboto, 'Helvetica Neue', sans-serif">System UI (Modern)</option>
          <option value="Impact, sans-serif">Impact (Bold)</option>
        </optgroup>
        <optgroup label="Regional">
          <option value="'Microsoft YaHei', 'PingFang SC', sans-serif">Chinese Sim (微软雅黑)</option>
          <option value="'Microsoft JhengHei', 'PingFang TC', sans-serif">Chinese Trad (正黑體)</option>
          <option value="'Meiryo', 'Hiragino Kaku Gothic ProN', sans-serif">Japanese (メイリオ)</option>
          <option value="'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif">Korean (맑은 고딕)</option>
          <option value="'Leelawadee UI', 'Thonburi', sans-serif">Thai (อักษรไทย)</option>
        </optgroup>
        <optgroup label="Stylistic">
          <option value="'Times New Roman', 'Georgia', serif">Serif (Français/Latin)</option>
          <option value="'Comic Sans MS', 'Chalkboard SE', sans-serif">Comic (Playful)</option>
        </optgroup>
      </select>
    </div>

    <div class="setting-group">
      <div class="label-row">
        <label for="fontSize" data-i18n="fontSize">Font Size</label>
        <span class="value-display"><span id="fontSizeValue">24</span>px</span>
      </div>
      <input type="range" id="fontSize" min="16" max="60" step="2" value="24">
    </div>

    <div class="setting-group">
      <div class="label-row">
        <label for="fontSizeRandom" data-i18n="fontRandomSize">Font Random Size</label>
        <span class="value-display"><span id="fontSizeRandomValue">5</span>%</span>
      </div>
      <input type="range" id="fontSizeRandom" min="0" max="0.5" step="0.05" value="0.05">
    </div>

    <div class="setting-group">
      <div class="label-row">
        <label for="speed" data-i18n="movingSpeed">Moving Speed</label>
        <span class="value-display">x<span id="speedValue">1.0</span></span>
      </div>
      <input type="range" id="speed" min="1.0" max="4.0" step="0.1" value="1.0">
    </div>

    <div class="setting-group">
      <div class="label-row">
        <label for="opacity" data-i18n="opacity">Opacity</label>
        <span class="value-display"><span id="opacityValue">1.0</span></span>
      </div>
      <input type="range" id="opacity" min="0.1" max="1.0" step="0.1" value="1.0">
    </div>

    <div class="setting-group">
      <div class="label-row">
        <label for="position" data-i18n="displayArea">Display Area</label>
      </div>
      <select id="position">
        <option value="all" data-i18n="fullScreen">Full Screen</option>
        <option value="top" data-i18n="topHalf">Top Half (50%)</option>
        <option value="bottom" data-i18n="bottomHalf">Bottom Half (50%)</option>
      </select>
    </div>

    <div class="toggle-group">
      <label for="hideChat" data-i18n="hideChatWindow">Hide Chat Window</label>
      <label class="mini-switch">
        <input type="checkbox" id="hideChat">
        <span class="mini-slider"></span>
      </label>
    </div>

    <div class="toggle-group">
      <label for="debugMode" data-i18n="debugMode">Debug Mode (Logs)</label>
      <label class="mini-switch">
        <input type="checkbox" id="debugMode">
        <span class="mini-slider"></span>
      </label>
    </div>

  </div>
  <script src="popup.js"></script>
</body>
</html>
